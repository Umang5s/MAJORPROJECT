<%- layout("/layout/boilerplate") %>

  <form method="POST" action="/set-password">
    <% if (!isFirstTimeGoogleUser) { %>
      <div class="mb-3">
        <label for="oldPassword">Old Password</label>
        <input type="password" name="oldPassword" class="form-control" required>
      </div>
      <% } %>

        <div class="mb-3">
          <label for="password">New Password</label>
          <input type="password" name="password" id="password" class="form-control" required>
        </div>

        <div class="mb-3">
          <label for="confirmPassword">Confirm New Password</label>
          <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" required>
        </div>

        <button type="submit" class="btn btn-primary">
          <%= isFirstTimeGoogleUser ? "Set Password" : "Change Password" %>
        </button>
  </form>

  <script>
    // Optional: Client-side password match check
    const form = document.querySelector('form');
    form.addEventListener('submit', function (e) {
      const pwd = document.getElementById('password').value;
      const confirmPwd = document.getElementById('confirmPassword').value;
      if (pwd !== confirmPwd) {
        e.preventDefault();
        alert('Passwords do not match!');
      }
    });
  </script>